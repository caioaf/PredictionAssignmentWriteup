webpackJsonp([36],{"0Vx0":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Zrlr"),t=_interopRequireDefault(r),i=e("zwoO"),o=_interopRequireDefault(i),n=e("Pf15"),s=_interopRequireDefault(n),u,c,a=e("U7vG"),_=e("41m7"),p=e("L0um"),l=e("7w9w"),d=l.Link,m=e("USwW"),f=e("fKGe"),b=e("ZfGp"),y=e("/L31"),h=e("USna"),S=e("rTJO"),T=e("CoAp"),v=e("4FHj"),g=v.getCourseRootPath,F=e("E55N"),I=e("vGNy"),P=e("y/hh");e("ei43");var E=(c=u=function(e){function SubforumSidebar(){return(0,t.default)(this,SubforumSidebar),(0,o.default)(this,e.apply(this,arguments))}return(0,s.default)(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this.props,r=e.listedForums,t=e.currentForumId,i=e.parentForumId,o=e.courseSlug;if(!r||r.length<=1)return null;return a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},a.createElement("div",{className:"subforums-list-title label-text color-secondary-text"},P("Subforums")),a.createElement("ul",{className:"nostyle"},r.map(function(e){var r=p("forum-title",{"body-2-text":e.id===t,"body-1-text":e.id!==t}),n=m.join(g(o),e.link);return a.createElement(d,{key:e.id,to:n,className:"nostyle"},a.createElement("li",{className:"subforum-entry"},e.id===t&&a.createElement("div",{className:"current-forum-indicator"}),a.createElement("div",{className:r},e.id===i?P("All"):e.title)))})))},SubforumSidebar}(a.Component),u.propTypes={courseSlug:a.PropTypes.string,listedForums:a.PropTypes.arrayOf(a.PropTypes.oneOfType([a.PropTypes.instanceOf(f),a.PropTypes.instanceOf(b),a.PropTypes.instanceOf(y)])),currentForumId:a.PropTypes.string,parentForumId:a.PropTypes.string},c);module.exports=_.compose(I({fields:["link","title","description","parentForumId"]}),h(S),T(F))(E)},"1GLy":function(module,exports,e){"use strict";var r=e("S2Uf"),t=e("nRzv"),i=e("552n"),o=i.naptimeForumTypes,n=t("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),s=t("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),u=t("/api/groupForumSubscriptions.v1",{type:"rest"});exports.getSubscription=function(e,t){return r(t===o.mentorForumType?s.get(e):t===o.groupForumType?u.get(e):n.get(e))},exports.subscribe=function(e,t){return r(t===o.mentorForumType?s.put(e):t===o.groupForumType?u.put(e):n.put(e))},exports.unsubscribe=function(e,t){return r(t===o.mentorForumType?s.delete(e):t===o.groupForumType?u.delete(e):n.delete(e))}},"562Q":function(module,exports,e){var r=e("WrhX");"string"==typeof r&&(r=[[module.i,r,""]]);var t,i={};i.transform=void 0;var o=e("MTIv")(r,i);r.locals&&(module.exports=r.locals)},"5vco":function(module,exports,e){"use strict";var r=e("UJwr");module.exports=function(e){return r.get("DiscussionsSubscriptionsWhitelist","validCourseIds").indexOf(e)>-1}},"9y1V":function(module,exports,e){var r=e("wqZe");"string"==typeof r&&(r=[[module.i,r,""]]);var t,i={};i.transform=void 0;var o=e("MTIv")(r,i);r.locals&&(module.exports=r.locals)},E55N:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Dd8w"),t=_interopRequireDefault(r),i=e("552n"),o=i.naptimeForumTypes;module.exports=function(e){if(!e.currentForum)return e;var r=e.courseForums.concat(e.mentorForums).concat(e.groupForums),i=r.find(function(e){return e.forumType.typeName===o.rootForumType}),n=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==i.id&&(n=r.find(function(r){return r.id===e.currentForum.parentForumId}));var s=r.filter(function(e){return e.parentForumId===n.id});return s.unshift(n),(0,t.default)({},e,{listedForums:s,parentForumId:n.id})}},El4n:function(module,exports,e){"use strict";var r=e("1GLy");exports.getForumSubscription=function(e,t){return r.getSubscription(e,t).then(function(e){return Object.assign(e.elements[0],{isSubscribed:!0})}).catch(function(r){if(404===r.status)return{id:e,isSubscribed:!1};throw r})},exports.subscribeUserToEntity=function(e,t){return r.subscribe(e,t)},exports.unsubscribeUserFromEntity=function(e,t){return r.unsubscribe(e,t)}},FflD:function(module,exports){},GKaH:function(module,exports,e){var r=e("FflD");"string"==typeof r&&(r=[[module.i,r,""]]);var t,i={};i.transform=void 0;var o=e("MTIv")(r,i);r.locals&&(module.exports=r.locals)},RpPc:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Zrlr"),t=_interopRequireDefault(r),i=e("zwoO"),o=_interopRequireDefault(i),n=e("Pf15"),s=_interopRequireDefault(n),u,c,a=e("L0um"),p=e("U7vG"),l=e("7w9w"),d=l.Link,m=e("41m7"),f=m.identity;e("GKaH");var b=function emptyFunction(){},y=(c=u=function(e){function Breadcrumbs(){return(0,t.default)(this,Breadcrumbs),(0,o.default)(this,e.apply(this,arguments))}return(0,s.default)(Breadcrumbs,e),Breadcrumbs.prototype.getFilteredLinks=function getFilteredLinks(){return this.props.links.slice().filter(f)},Breadcrumbs.prototype.render=function render(){var e=this.props.className,r=this.getFilteredLinks();return p.createElement("ol",{className:a("rc-Breadcrumbs inline",e)},r.map(function(e,t){var i=[p.createElement("li",null,e.href?p.createElement(d,{to:e.href,onClick:e.onClick||b},e.label):p.createElement("span",null,e.label))];return t!==r.length-1&&i.push(p.createElement("li",{className:"divider"},"/")),i}))},Breadcrumbs}(p.Component),u.propTypes={className:p.PropTypes.string,links:p.PropTypes.arrayOf(p.PropTypes.shape({label:p.PropTypes.string.isRequired,href:p.PropTypes.string,onClick:p.PropTypes.func})).isRequired},c);module.exports=y},W83G:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Dd8w"),t=_interopRequireDefault(r),i=e("El4n");exports.fetchSubscriptionForForum=function(e,r){var t=r.forumSubscriptionId,o=r.forumType;return i.getForumSubscription(t,o).then(function(r){e.dispatch("UPDATE_SUBSCRIPTION",r)}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})},exports.addSubscription=function(e,r){var t=r.forumSubscriptionId,o=r.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",{id:t,isInProgress:!0}),i.subscribeUserToEntity(t,o).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:t,isSubscribed:!0})}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})},exports.deleteSubscription=function(e,r){var o=r.subscription,n=r.forumSubscriptionId,s=r.forumType;return e.dispatch("UPDATE_SUBSCRIPTION",(0,t.default)({},o,{isInProgress:!0})),i.unsubscribeUserFromEntity(n,s).then(function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:n,isSubscribed:!1})}).fail(function(r){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",r)})}},WrhX:function(module,exports){},bJId:function(module,exports){},ei43:function(module,exports,e){var r=e("bJId");"string"==typeof r&&(r=[[module.i,r,""]]);var t,i={};i.transform=void 0;var o=e("MTIv")(r,i);r.locals&&(module.exports=r.locals)},kDxD:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Zrlr"),t=_interopRequireDefault(r),i=e("zwoO"),o=_interopRequireDefault(i),n=e("Pf15"),s=_interopRequireDefault(n),u,c,_=e("41m7"),a=e("U7vG"),p=e("hgxZ"),l=e("W83G"),d=l.fetchSubscriptionForForum,m=l.addSubscription,f=l.deleteSubscription,b=e("nNdA"),y=e("SfBx"),h=e("p2kh"),S=e("5vco"),T=e("y/hh");e("562Q");var v=(c=u=function(e){function SubscriptionButton(r,i){(0,t.default)(this,SubscriptionButton);var n=(0,o.default)(this,e.call(this,r,i));return n.toggleSubscription=function(){var e=n.props,r=e.isSubscribed,t=e.forumType,i=e.subscription,o=e.forumSubscriptionId;r?(n.context.executeAction(f,{subscription:i,forumSubscriptionId:o,forumType:t}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:T("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(m,{forumType:t,forumSubscriptionId:o}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:T("You will receive emails whenever new threads are added.")}))},n.state={canModerateGroup:!1,subscriptionDetails:null,showSubscriptionDetails:!1},n}return(0,s.default)(SubscriptionButton,e),SubscriptionButton.prototype.componentDidMount=function componentDidMount(){var e=this,r=this.props,t=r.groupId,i=r.subscription,o=r.forumSubscriptionId,n=r.forumType,s=p.isSuperuser(),u=p.isAuthenticatedUser();i||this.context.executeAction(d,{forumType:n,forumSubscriptionId:o}),t&&b(t,u,s).then(function(r){return e.setState({canModerateGroup:r})})},SubscriptionButton.prototype.componentDidUpdate=function componentDidUpdate(){var e=this.props,r=e.subscription,t=e.forumSubscriptionId,i=e.forumType;r||this.context.executeAction(d,{forumType:i,forumSubscriptionId:t})},SubscriptionButton.prototype.render=function render(){var e=this.props,r=e.subscription,t=e.isSubscribed,i=e.hasError,o=e.courseId,n=e.hasModerationRole,s=e.isSubscriptionInProgress,u=this.state,c=u.canModerateGroup,p=u.showSubscriptionDetails,l=u.subscriptionDetails;if(!S(o)&&!n&&!c)return null;return a.createElement("div",{className:"rc-SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},a.createElement("button",{className:"passive",onClick:this.toggleSubscription,disabled:!r},(!r||s)&&a.createElement(y,{name:"spinner",className:"cif-spin"}),!!r&&!s&&T(t?"Unsubscribe":"Subscribe")),!i&&p&&a.createElement("div",{className:"message caption-text"},l),i&&a.createElement("div",{className:"errorMessage"},T("Sorry, something went wrong. Try again.")))},SubscriptionButton}(a.Component),u.propTypes={hasModerationRole:a.PropTypes.bool,hasError:a.PropTypes.bool,courseId:a.PropTypes.string,forumSubscriptionId:a.PropTypes.string,subscription:a.PropTypes.object,forumType:a.PropTypes.string,groupId:a.PropTypes.string,isSubscribed:a.PropTypes.bool,isSubscriptionInProgress:a.PropTypes.bool},u.contextTypes={executeAction:a.PropTypes.func.isRequired},c);module.exports=_.compose(h(["SubscriptionStore","CourseMembershipStore","CourseStore"],function(e,r){var t=e.SubscriptionStore,i=e.CourseMembershipStore,o=e.CourseStore,n=r.forumId,s=n&&n.split("~"),u=n&&p.get().id+"~"+s[0]+"~"+s[1];return{forumSubscriptionId:u,courseId:o.getCourseId(),hasModerationRole:i.hasModerationRole()||p.isSuperuser(),hasError:t.hasError(),subscription:t.getSubscription(u),isSubscribed:t.getIsSubscribed(u),isSubscriptionInProgress:t.getIsSubscriptionInProgress(u)}}))(v)},pqsn:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var r=e("Zrlr"),t=_interopRequireDefault(r),i=e("zwoO"),o=_interopRequireDefault(i),n=e("Pf15"),s=_interopRequireDefault(n),u,c,a=e("U7vG"),p=e("41m7"),l=p.compose,d=e("USwW"),m=e("z07m"),f=e("4FHj"),b=f.getCourseDiscussionsUrl,y=f.getCourseRootPath,h=e("FqLJ"),S=e("RpPc"),T=e("kDxD"),v=e("BQba"),g=e("0Vx0"),F=e("abys"),I=e("nk09"),P=e("Hj8c"),E=e("rTJO"),D=e("E55N"),x=e("552n"),N=x.naptimeForumTypes,w=e("vGNy"),R=e("fKGe"),U=e("ZfGp"),O=e("/L31"),q=e("CoAp"),k=e("USna"),B=e("y/hh");e("9y1V");var C=(c=u=function(e){function ThreadsView(){return(0,t.default)(this,ThreadsView),(0,o.default)(this,e.apply(this,arguments))}return(0,s.default)(ThreadsView,e),ThreadsView.prototype.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===N.itemForumType)return null;return a.createElement("div",{className:"flex-1"},a.createElement(T,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},ThreadsView.prototype.render=function render(){var e=this.props.currentForum;if(!e)return a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},B("Oops! Looks like this thread isn't viewable or does not exist."));var r=e.parentForumId&&this.props.listedForums.find(function(r){return e.parentForumId===r.id}),t=e.title,i=e.description,o=e.id,n=d.join(y(this.props.courseSlug),e.link),s=[{label:B("Discussion Forums"),href:b()},r?{label:r.title,href:d.join(y(this.props.courseSlug),r.link)}:void 0],u=!!this.context.router.params.question_id;return a.createElement("div",{className:"rc-ThreadsView"},a.createElement("div",{className:"horizontal-box vertical-when-tablet"},a.createElement("div",{className:"flex-2 threads-view-header"},a.createElement(S,{className:"breadcrumbs",links:s}),a.createElement("div",null,a.createElement("div",{className:"forum-name headline-5-text color-primary-text"},t),!u&&a.createElement("div",{className:"forum-description horizontal-box align-items-vertical-center vertical-when-mobile"},a.createElement(h,{className:"body-1-text",cml:i}),a.createElement("div",null,this.renderSubscriptionButton())))),a.createElement("div",{className:"flex-1 align-self-end session-switcher-container"},a.createElement(v,null))),a.createElement("div",{className:"horizontal-box align-items-top vertical-when-tablet"},a.createElement(m,{className:"flex-2 discussions-body-column",key:o,backLink:n}),a.createElement(g,null)))},ThreadsView}(a.Component),u.propTypes={currentForum:a.PropTypes.oneOfType([a.PropTypes.instanceOf(R),a.PropTypes.instanceOf(U),a.PropTypes.instanceOf(O)]),listedForums:a.PropTypes.arrayOf(a.PropTypes.oneOfType([a.PropTypes.instanceOf(R),a.PropTypes.instanceOf(U),a.PropTypes.instanceOf(O)])),courseSlug:a.PropTypes.string},u.contextTypes={router:a.PropTypes.object.isRequired},c);module.exports=l(w({fields:["title","description","link"],subcomponents:[g,F,I,P]}),k(E),q(D))(C)},wqZe:function(module,exports){}});
//# sourceMappingURL=36.baa1b18fc128e1e49892.js.map
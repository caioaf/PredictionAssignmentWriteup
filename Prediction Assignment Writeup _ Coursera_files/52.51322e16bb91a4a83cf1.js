webpackJsonp([52],{"4loO":function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),o=_interopRequireDefault(t),r=e("zwoO"),s=_interopRequireDefault(r),n=e("Pf15"),i=_interopRequireDefault(n),u=e("U7vG"),a=e("35fU");module.exports=function(e){return function(t){var r,n,c=t.displayName||t.name,l=(n=r=function(r){function RedirectWrapper(){var e,t,n;(0,o.default)(this,RedirectWrapper);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return e=t=(0,s.default)(this,r.call.apply(r,[this].concat(u))),t.state={haveRedirected:!1},n=e,(0,s.default)(t,n)}return(0,i.default)(RedirectWrapper,r),RedirectWrapper.prototype.componentWillMount=function componentWillMount(){this.conditionallyRedirect(this.props)},RedirectWrapper.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){this.conditionallyRedirect(e)},RedirectWrapper.prototype.conditionallyRedirect=function conditionallyRedirect(t){var o=e(t),r=o.redirectUrl,s=o.shouldRedirect;!this.state.haveRedirected&&s&&(this.setState({haveRedirected:!0}),this.context.router.push(r))},RedirectWrapper.prototype.render=function render(){if(e(this.props).shouldRedirect)return null;return u.createElement(t,this.props)},RedirectWrapper}(u.Component),r.displayName=c+"RedirectWrapper",r.contextTypes={router:u.PropTypes.object.isRequired},n);return a(l,t),l}}},D2Wy:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),o=_interopRequireDefault(t),r=e("zwoO"),s=_interopRequireDefault(r),n=e("Pf15"),i=_interopRequireDefault(n),u,a,c=e("U7vG"),l=e("D5OX"),p=e("b0Wq"),d=e("Ygk+"),f=e("UJwr"),h=e("p2kh"),m=e("y/hh"),y=function getLocalStorageKey(e){return"discussionSurveyDisplayed."+e};e("z5pr");var v=(a=u=function(e){function DiscussionSatisfactionSurveyModal(){var t,r,n;(0,o.default)(this,DiscussionSatisfactionSurveyModal);for(var i=arguments.length,u=Array(i),a=0;a<i;a++)u[a]=arguments[a];return t=r=(0,s.default)(this,e.call.apply(e,[this].concat(u))),r.state={showModal:!1,nextLocation:null,userConfirmed:!1},r.handleOpenSurvey=function(){d.safelyOpenUrl("https://www.surveymonkey.com/r/RJ22ZPH"),r.handleContinue()},r.handleContinue=function(){l.set(y(r.props.courseId),!0),r.setState({userConfirmed:!0,showModal:!1},function(){r.context.router.push(r.state.nextLocation)})},r.routerWillLeave=function(e){var t=r.props,o=t.courseId,s=t.sessionId,n=r.state,i=n.userConfirmed,u=n.nextLocation;if(i)return!0;if(e){var a=f.get("DiscussionsSatisfactionSurvey","showSatisfactionSurvey",{course_id:o,ondemand_session_id:s}),c=l.get(y(o));if(!a||u||c)return!0;return r.setState({showModal:!0,nextLocation:e}),!1}return!0},n=t,(0,s.default)(r,n)}return(0,i.default)(DiscussionSatisfactionSurveyModal,e),DiscussionSatisfactionSurveyModal.prototype.componentDidMount=function componentDidMount(){this.context.router.setRouteLeaveHook(this.props.currentRoute,this.routerWillLeave)},DiscussionSatisfactionSurveyModal.prototype.render=function render(){var e=this.state.showModal;return c.createElement("div",{className:"rc-DiscussionSatisfactionSurveyModal"},e&&c.createElement(p,{allowClose:!0,handleClose:this.handleContinue,className:"DiscussionSatisfactionModal",trackingName:"discussion_satisfaction_survey",modalName:m("Discussion Forums Satisfaction")},c.createElement("h4",null,m("Please take a short survey to help us improve the discussion forums.")),c.createElement("div",null,c.createElement("button",{className:"survey-open primary",onClick:this.handleOpenSurvey},m("Open survey in new tab"))),c.createElement("div",null,c.createElement("button",{className:"survey-continue button-link",onClick:this.handleContinue},m("No thanks, continue to next page")))))},DiscussionSatisfactionSurveyModal}(c.Component),u.propTypes={currentRoute:c.PropTypes.object.isRequired,courseId:c.PropTypes.string,sessionId:c.PropTypes.string},u.contextTypes={router:c.PropTypes.object.isRequired},a);module.exports=h(v,["SessionStore"],function(e){return{sessionId:e.SessionStore.getSessionId()}})},LJYu:function(module,exports){},LVEh:function(module,exports,e){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t=e("Zrlr"),o=_interopRequireDefault(t),r=e("zwoO"),s=_interopRequireDefault(r),n=e("Pf15"),i=_interopRequireDefault(n),u,a,c,l,p=e("U7vG"),d=e("41m7"),f=d.compose,h=e("D2Wy"),m=e("x4Kt"),y=e("DhnK"),v=y.isForumsBlacklisted,R=e("zIFn"),D=e("jVzB"),C=e("4loO"),S=e("StZn"),g=e("WrAm"),x=e("y/hh"),P=(a=u=function(e){function CourseHomeDiscussionsPage(){return(0,o.default)(this,CourseHomeDiscussionsPage),(0,s.default)(this,e.apply(this,arguments))}return(0,i.default)(CourseHomeDiscussionsPage,e),CourseHomeDiscussionsPage.prototype.render=function render(){var e=this.props,t=e.courseName,o=e.route,r=e.courseId,s=x("#{courseName} - Discussions",{courseName:t});return p.createElement("div",{className:"rc-CourseHomeDiscussionsPage"},p.createElement(h,{currentRoute:o,courseId:r}),p.createElement(m,{title:s}),this.props.children)},CourseHomeDiscussionsPage}(p.Component),u.propTypes={route:p.PropTypes.object.isRequired,courseId:p.PropTypes.string,courseName:p.PropTypes.string,children:p.PropTypes.node},a),M=f(R.createTrackedContainer(function(){return{namespace:{page:"discussions"}}}),D(["CourseStore","CourseMembershipStore","ApplicationStore"],function(e,t){var o=e.CourseStore,r=e.CourseMembershipStore,s=e.ApplicationStore,n=r.isEnrolled()&&!r.isPreEnrolled(),i=o.getCourseId(),u=r.hasModerationRole()||s.isSuperuser(),a=n;return{courseId:i,courseName:o.getMetadata().get("name"),courseRootPath:o.getCourseRootPath(),canAccessDiscussions:!v(i)&&(a||u)}}),C(function(e){return{redirectUrl:e.courseRootPath,shouldRedirect:!e.canAccessDiscussions}}))(P);module.exports=(l=c=function(e){function FluxibleCourseHomeDiscussionsPage(){return(0,o.default)(this,FluxibleCourseHomeDiscussionsPage),(0,s.default)(this,e.apply(this,arguments))}return(0,i.default)(FluxibleCourseHomeDiscussionsPage,e),FluxibleCourseHomeDiscussionsPage.prototype.componentWillMount=function componentWillMount(){this.fluxibleContext=g(this.context.fluxibleContext)},FluxibleCourseHomeDiscussionsPage.prototype.render=function render(){return p.createElement(S,{context:this.fluxibleContext.getComponentContext()},p.createElement(M,this.props))},FluxibleCourseHomeDiscussionsPage}(p.Component),c.contextTypes={fluxibleContext:p.PropTypes.object},l)},z5pr:function(module,exports,e){var t=e("LJYu");"string"==typeof t&&(t=[[module.i,t,""]]);var o,r={};r.transform=void 0;var s=e("MTIv")(t,r);t.locals&&(module.exports=t.locals)}});
//# sourceMappingURL=52.51322e16bb91a4a83cf1.js.map